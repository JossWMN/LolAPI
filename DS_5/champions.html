<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campeones LoL</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- BANNER -->
    <header class="banner">
        <img src="image/banner.png" alt="Banner">
    </header>

    <!-- NAVBAR -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html">INICIO</a></li>
            <li><a class="active" href="champions.html">CHAMPIONS</a></li>
            <li><a href="player.html">PLAYER</a></li>
            <li><a href="items.html">ITEMS</a></li>
            <li><a href="#sobre-nosotros">SOBRE NOSOTROS</a></li>
        </ul>
    </nav>

    <!-- BUSQUEDA Y FILTRO -->
    <div class="busqueda">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar campeón...">
            <button onclick="buscarCampeon()">Buscar</button>
        </div>

        <select id="roleFilter" onchange="filtrarRol()">
            <option value="all">Todos los roles</option>
            <option value="fighter">Luchador</option>
            <option value="mage">Mago</option>
            <option value="assassin">Asesino</option>
            <option value="tank">Tanque</option>
            <option value="marksman">Tirador</option>
            <option value="support">Soporte</option>
        </select>
    </div>

    <!-- CONTENEDOR DINÁMICO -->
    <div class="champions-container"></div>

    <!-- SCRIPT PRINCIPAL -->
    <script>
        const VERSION = "14.1.1";

        async function cargarCampeones() {
            const contenedor = document.querySelector(".champions-container");
            contenedor.innerHTML = "";

            const res = await fetch(`https://ddragon.leagueoflegends.com/cdn/${VERSION}/data/es_ES/champion.json`);
            const data = await res.json();
            const lista = Object.values(data.data);

            for (let champ of lista) {
                const infoRes = await fetch(`https://ddragon.leagueoflegends.com/cdn/${VERSION}/data/es_ES/champion/${champ.id}.json`);
                const infoData = await infoRes.json();
                const info = infoData.data[champ.id];

                const habilidades = info.spells.map(spell => `
                    <div class="ability">
                        <img src="https://ddragon.leagueoflegends.com/cdn/${VERSION}/img/spell/${spell.image.full}">
                        <p>${spell.name}</p>
                    </div>
                `).join("");

                const tarjeta = `
                    <div class="card champ-card" data-name="${champ.id.toLowerCase()}" data-role="${champ.tags[0]?.toLowerCase()}">
                        <div class="card-inner">
                            <div class="card-front card-face">
                                <img src="https://ddragon.leagueoflegends.com/cdn/img/champion/loading/${champ.id}_0.jpg">
                                <div class="front-name">${champ.name}</div>
                            </div>


                            <div class="card-back card-face">
                                <h3>${champ.title}</h3>
                                <p class="lore">${info.lore.substring(0,475)}...</p>
                                <h3>Habilidades</h3>
                                ${habilidades}
                            </div>

                        </div>
                    </div>
                `;

                contenedor.innerHTML += tarjeta;
            }

            activarFlip();
        }

        function activarFlip() {
            document.querySelectorAll(".card").forEach(card => {
                card.addEventListener("click", () => {
                    card.classList.toggle("flip");
                });
            });
        }

        function buscarCampeon() {
            let input = document.getElementById("searchInput").value.toLowerCase();
            document.querySelectorAll(".champ-card").forEach(card => {
                let nombre = card.dataset.name;
                card.style.display = nombre.includes(input) ? "block" : "none";
            });
        }

        function filtrarRol() {
            let rol = document.getElementById("roleFilter").value;

            document.querySelectorAll(".champ-card").forEach(card => {
                card.style.display = (rol === "all" || card.dataset.role === rol) ? "block" : "none";
            });
        }

        cargarCampeones();
    </script>

</body>

</html>
